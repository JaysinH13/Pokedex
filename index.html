<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Pokédex</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function getDetails() {
            var input = $('#pokeInput').val();
            var url = 'https://pokeapi.co/api/v2/pokemon/' + input;
            $.getJSON(url, function (data) {
                var name = data.name;
                var id = data.id;
                var types = data.types.map(function (type) {
                    return type.type.name;
                }).join(', ');
                var abilities = data.abilities.map(function (ability) {
                    return ability.ability.name;
                }).join(', ');
                var height = data.height;
                var weight = data.weight;
                var imgSrc = data.sprites.front_default;
                var forms = data.forms.map(function (form) {
                    return '<option value="' + form.url + '">' + form.name + '</option>';
                }).join('');
                $('#name').text(name);
                $('#id').text(id);
                $('#types').text(types);
                $('#abilities').text(abilities);
                $('#height').text(height);
                $('#weight').text(weight);
                $('#img').attr('src', imgSrc);
                $('#forms').html(forms);
                $('#error').hide();
                $('#pokeData').show();
                getFormDetails(data.forms[0].url); // get details for the first form by default
            }).fail(function () {
                $('#pokeData').hide();
                $('#error').show();
            });
        }

        function getFormDetails(url) {
            $.getJSON(url, function (data) {
                var name = data.name;
                var id = data.id;
                var types = data.types.map(function (type) {
                    return type.type.name;
                }).join(', ');
                var imgSrc = data.sprites.front_default;
                var stats = data.stats.map(function (stat) {
                    return '<tr><td>' + stat.stat.name + ':</td><td>' + stat.base_stat + '</td></tr>';
                }).join('');
                var moves = data.moves.slice(0, 5).map(function (move) {
                    return move.move.name;
                }).join(', ');
                $('#name').text(name);
                $('#id').text(id);
                $('#types').text(types);
                $('#img').attr('src', imgSrc);
                $('#stats').html(stats);
                $('#moves').text(moves);
            });
        }
    </script>
</head>

<body>
    <h1>Pokédex</h1>
    <p>Enter a Pokémon name or Pokédex number:</p>
    <input type="text" id="pokeInput">
    <button onclick="getDetails()">Go</button>
    <div id="pokeData" style="display:none;">
        <h2><span id="name"></span> (#<span id="id"></span>)</h2>
        <img id="img">
        <dl>
            <dt>Types:</dt>
            <dd><span id="types"></span></dd>
            <dt>Abilities:</dt>
            <dd><span id="abilities"></span></dd>
            <dt>Height:</dt>
            <dd><span id="height"></span> decimeters</dd>
            <dt>Weight:</dt>
            <dd><span id="weight"></span> hectograms</dd>
        </dl>
    </div>
    <div id="error" style="display:none;">
        <p>Error: Could not find Pokémon. Please check your input.</p>
    </div>
</body>

</html>